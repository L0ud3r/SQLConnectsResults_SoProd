/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.2
 *
 */
!function (e) { jQuery.fn.extend({ slimScroll: function (i) { var s = e.extend({ width: "auto", height: "250px", size: "7px", color: "#000", position: "right", distance: "1px", start: "top", opacity: .4, alwaysVisible: !1, disableFadeOut: !1, railVisible: !1, railColor: "#333", railOpacity: .2, railDraggable: !0, railClass: "slimScrollRail", barClass: "slimScrollBar", wrapperClass: "slimScrollDiv", allowPageScroll: !1, wheelStep: 20, touchScrollStep: 200, borderRadius: "7px", railBorderRadius: "7px" }, i); return this.each(function () { var o, r, a, l, n, c, u, h, p = "<div></div>", d = 30, g = !1, f = e(this); if (f.parent().hasClass(s.wrapperClass)) { var v = f.scrollTop(); if (y = f.parent().find("." + s.barClass), m = f.parent().find("." + s.railClass), D(), e.isPlainObject(i)) { if ("height" in i && "auto" == i.height) { f.parent().css("height", "auto"), f.css("height", "auto"); var b = f.parent().parent().height(); f.parent().css("height", b), f.css("height", b) } if ("scrollTo" in i) v = parseInt(s.scrollTo); else if ("scrollBy" in i) v += parseInt(s.scrollBy); else if ("destroy" in i) return y.remove(), m.remove(), void f.unwrap(); S(v, !1, !0) } } else { s.height = "auto" == i.height ? f.parent().height() : i.height; var w = e(p).addClass(s.wrapperClass).css({ position: "relative", overflow: "hidden", width: s.width, height: s.height }); f.css({ overflow: "hidden", width: s.width, height: s.height }); var m = e(p).addClass(s.railClass).css({ width: s.size, height: "100%", position: "absolute", top: 0, display: s.alwaysVisible && s.railVisible ? "block" : "none", "border-radius": s.railBorderRadius, background: s.railColor, opacity: s.railOpacity, zIndex: 90 }), y = e(p).addClass(s.barClass).css({ background: s.color, width: s.size, position: "absolute", top: 0, opacity: s.opacity, display: s.alwaysVisible ? "block" : "none", "border-radius": s.borderRadius, BorderRadius: s.borderRadius, MozBorderRadius: s.borderRadius, WebkitBorderRadius: s.borderRadius, zIndex: 99 }), x = "right" == s.position ? { right: s.distance } : { left: s.distance }; m.css(x), y.css(x), f.wrap(w), f.parent().append(y), f.parent().append(m), s.railDraggable && y.bind("mousedown", function (i) { var s = e(document); return a = !0, t = parseFloat(y.css("top")), pageY = i.pageY, s.bind("mousemove.slimscroll", function (e) { currTop = t + e.pageY - pageY, y.css("top", currTop), S(0, y.position().top, !1) }), s.bind("mouseup.slimscroll", function (e) { a = !1, M(), s.unbind(".slimscroll") }), !1 }).bind("selectstart.slimscroll", function (e) { return e.stopPropagation(), e.preventDefault(), !1 }), m.hover(function () { E() }, function () { M() }), y.hover(function () { r = !0 }, function () { r = !1 }), f.hover(function () { o = !0, E(), M() }, function () { o = !1, M() }), f.bind("touchstart", function (e, t) { e.originalEvent.touches.length && (n = e.originalEvent.touches[0].pageY) }), f.bind("touchmove", function (e) { (g || e.originalEvent.preventDefault(), e.originalEvent.touches.length) && (S((n - e.originalEvent.touches[0].pageY) / s.touchScrollStep, !0), n = e.originalEvent.touches[0].pageY) }), D(), "bottom" === s.start ? (y.css({ top: f.outerHeight() - y.outerHeight() }), S(0, !0)) : "top" !== s.start && (S(e(s.start).position().top, null, !0), s.alwaysVisible || y.hide()), function () { window.addEventListener ? (this.addEventListener("DOMMouseScroll", C, { passive: !1 }), this.addEventListener("mousewheel", C, { passive: !1 }), window.addEventListener("mousewheel", H, { passive: !1 }), window.addEventListener("DOMMouseScroll", H, { passive: !1 })) : document.attachEvent("onmousewheel", C) }() } function C(t) { if (o) { var i = 0; (t = t || window.event).wheelDelta && (i = -t.wheelDelta / 120), t.detail && (i = t.detail / 3); var r = t.target || t.srcTarget || t.srcElement; e(r).closest("." + s.wrapperClass).is(f.parent()) && S(i, !0), t.preventDefault && !g && t.preventDefault(), g || (t.returnValue = !1) } } function H(e) { o && (e.preventDefault && !g && e.preventDefault(), g || (e.returnValue = !1)) } function S(e, t, i) { g = !1; var o = e, r = f.outerHeight() - y.outerHeight(); if (t && (o = parseInt(y.css("top")) + e * parseInt(s.wheelStep) / 100 * y.outerHeight(), o = Math.min(Math.max(o, 0), r), o = e > 0 ? Math.ceil(o) : Math.floor(o), y.css({ top: o + "px" })), o = (u = parseInt(y.css("top")) / (f.outerHeight() - y.outerHeight())) * (f[0].scrollHeight - f.outerHeight()), i) { var a = (o = e) / f[0].scrollHeight * f.outerHeight(); a = Math.min(Math.max(a, 0), r), y.css({ top: a + "px" }) } f.scrollTop(o), f.trigger("slimscrolling", ~~o), E(), M() } function D() { c = Math.max(f.outerHeight() / f[0].scrollHeight * f.outerHeight(), d), y.css({ height: c + "px" }); var e = c == f.outerHeight() ? "none" : "block"; y.css({ display: e }) } function E() { if (D(), clearTimeout(l), u == ~~u) { if (g = s.allowPageScroll, h != u) { var e = 0 == ~~u ? "top" : "bottom"; f.trigger("slimscroll", e) } } else g = !1; h = u, c >= f.outerHeight() ? g = !0 : (y.stop(!0, !0).fadeIn("fast"), s.railVisible && m.stop(!0, !0).fadeIn("fast")) } function M() { s.alwaysVisible || (l = setTimeout(function () { s.disableFadeOut && o || r || a || (y.fadeOut("slow"), m.fadeOut("slow")) }, 1e3)) } }), this } }), jQuery.fn.extend({ slimscroll: jQuery.fn.slimScroll }) }(jQuery);